<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Audio e video</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head>

<body>
	
	<div class="columns">
	  <div class="column">
		<p><button type="button" onclick="getStream('video')">Grab video</button></p>
		
		<video controls autoplay style="height:180px; width: 240px;"></video>
	  </div>
	  <div class="column">
		<p><button type="button" onclick="getStream('audio')">Grab audio</button></p>
		
		<audio controls></audio>
	  </div>
	</div>
	
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
  <script>
	function getUserMedia(constraints) {
	  if (navigator.mediaDevices) {
		return navigator.mediaDevices.getUserMedia(constraints);
	  }
		
	  var legacyApi = navigator.getUserMedia || navigator.webkitGetUserMedia ||
		navigator.mozGetUserMedia || navigator.msGetUserMedia;
		
	  if (legacyApi) {
		return new Promise(function (resolve, reject) {
		  legacyApi.bind(navigator)(constraints, resolve, reject);
		});
	  }
	}

	function getStream (type) {
	  if (!navigator.mediaDevices && !navigator.getUserMedia && !navigator.webkitGetUserMedia &&
		!navigator.mozGetUserMedia && !navigator.msGetUserMedia) {
		alert('User Media API not supported.');
		return;
	  }

	  var constraints = {};
	  constraints[type] = true;
	  
	  getUserMedia(constraints)
		.then(function (stream) {
		  var mediaControl = document.querySelector(type);
		  
		  if ('srcObject' in mediaControl) {
			mediaControl.srcObject = stream;
		  } else if (navigator.mozGetUserMedia) {
			mediaControl.mozSrcObject = stream;
		  } else {
			mediaControl.src = (window.URL || window.webkitURL).createObjectURL(stream);
		  }
		  
		  mediaControl.play();
		})
		.catch(function (err) {
		  alert('Error: ' + err);
		});
	}
	  
  </script>
</body>
</html>
